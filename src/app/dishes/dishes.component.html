<!-- dish section -->
<section class="book_section layout_padding">
  <div class="container">
    <!-- <div class="form-check form-switch">
      <input
          [(ngModel)]="admin"
          class="form-check-input"
          type="checkbox"
          role="switch"
          id="admin"/>
      <label class="form-check-label" for="admin" style="color: white">Admin</label>
  </div> -->

    <div class="card mask-custom">
      <table class="table table-borderless text-white mb-0" *ngIf="admin">
        <thead>
          <tr id="cabecera">
            <th scope="col">Dish</th>
            <th scope="col">Image</th>
            <th scope="col">Popularity</th>
            <th scope="col">Active</th>
            <th scope="col">Categories</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let dish of dishes; let i = index">
            <td><input class="form-input" type="text" id="nombrePlato" [(ngModel)]="dish.name"></td>
            <td>
              <div class="mb-3">
                <img src="..\assets\images\f1.png" width="80px" height="80px" *ngIf="visibilityImg"(click)="changeVisibility()" />
                <input class="form-control" id="formFileSm" type="file" style="width: 90%" *ngIf="visibilityFormFile">
                <!-- {{dish.image}} a src;
                input formFile amagat i al clicar imatge apareix
                FIXME ho implementa a tots els registres, mirar com extreure a quin element dish concret hem clicat
              -->
              </div>
            </td>
            <td>
              <select class="form-select" [(ngModel)]="dish.popularity">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </td>
            <td>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked"
                  [(ngModel)]="dish.status">
              </div>
            </td>
            <td>
              <select class="form-select">
                <option *ngFor="let category of dish.categories">{{category}}</option> <!-- .name al agafarho d bbdd -->
              </select>
            </td>
            <td>
              <div class="btn-group-vertical btn-group-sm" role="group">
                <button type="button" class="btn btn-light">Update</button>
                <button type="button" class="btn btn-light">Delete</button>
              </div>
            </td>
          </tr>
          <tr *ngIf="addDish">
            <td><input class="form-input" type="text" id="nombrePlato" [(ngModel)]="newDish.name"></td>
            <td>
              <div class="mb-3">
                <input class="form-control" id="formFileSm" type="file" style="width: 90%">
                <!-- ngmodel per que agafi la imatge pujada i el foti al plat -->
              </div>
            </td>
            <td>
              <select class="form-select" [(ngModel)]="newDish.popularity">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </select>
            </td>
            <td>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked"
                  [(ngModel)]="newDish.status">
              </div>
            </td>
            <td>
              <!-- plato nuevo ha de mostrar lista de posibles categorias con check -->
              <div class="form-check" [(ngModel)]="possibleCategories">
                <div *ngFor="let category of possibleCategories">
                  <input class="form-check-input" type="checkbox" id="flexCheckDefault">
                  <label class="form-check-label" for="flexCheckDefault">{{category}}</label>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="form_container">
        <div *ngIf="addDish">
          <button (click)="save()">
            Save New Dish
          </button>
          <br>
          <button (click)="cancel()">
            Cancel
          </button>
        </div>
        <button (click)="add()" *ngIf="!addDish">
          New Dish
        </button>
      </div>
    </div>
  </div>

</section>
<!-- end dish section -->
